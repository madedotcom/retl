# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r

language: r
r:
  - release

cache:
  directories:
  - $HOME/.local/share/renv
  - $TRAVIS_BUILD_DIR/renv/library

install:
  - Rscript -e "if (!requireNamespace('renv', quietly = TRUE)) install.packages('renv')"
  - Rscript -e "renv::restore()"

os: linux
dist: xenial
arch: arm64

r_packages:
  - testthat
  - R.utils
  - aws.s3

r_github_packages:
  - jimhester/covr
  - byapparov/bigrquery
  - r-lib/gargle
  - jimhester/lintr
  - cloudyr/googleCloudStorageR

after_success:
  - Rscript -e 'covr::codecov()'

addons:
  apt:
    sources:
    - sourceline: 'ppa:chris-lea/libsodium'
    packages:
    - libsodium-dev
